document.addEventListener("DOMContentLoaded",(function(){console.log("DOM fully loaded and parsed for Task Diary");var e=(new Date).toISOString().split("T")[0],t=(new Date).toLocaleDateString("en-US",{weekday:"long"}),n=document.getElementById("current-date"),r=document.getElementById("current-weekday");if(n&&r){n.innerText=e,r.innerText=t;var a=document.getElementById("tasks-list"),o=document.getElementById("task-form"),d=document.getElementById("task-description"),i=document.getElementById("save-button"),c=document.getElementById("task-reflection");o&&d&&a&&i&&c?(o.addEventListener("submit",(function(e){e.preventDefault();var t=d.value;if(t){var n=document.createElement("li");n.textContent=t,a.appendChild(n),d.value=""}})),i.addEventListener("click",(function(t){t.preventDefault();var n=[];a.querySelectorAll("li").forEach((function(e){n.push(e.textContent)}));var r=c.value;fetch("/task-diary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,tasks:n,reflections:r})}).then((function(e){return e.json()})).then((function(e){e.success?(alert("Task diary entry saved!"),s()):alert("Error saving task diary entry.")}))})),s()):console.error("One or more elements are missing from the DOM")}else console.error("current-date or current-weekday element is missing");function s(){fetch("/get-task-diary-entries").then((function(e){return e.json()})).then((function(t){var n=document.getElementById("entries-container");n.innerHTML="",t.forEach((function(t){if(t.date===e){var r=document.createElement("div");r.classList.add("entry");var a=document.createElement("p");a.innerText="Tasks: ".concat(t.tasks.join(", "));var o=document.createElement("p");o.innerText="Reflections: ".concat(t.reflections),r.appendChild(a),r.appendChild(o),n.appendChild(r)}}))}))}}));