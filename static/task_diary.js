document.addEventListener("DOMContentLoaded",(function(){var e=(new Date).toISOString().split("T")[0],t=(new Date).toLocaleDateString("en-US",{weekday:"long"});document.getElementById("current-date").innerText=e,document.getElementById("current-weekday").innerText=t;var n=document.getElementById("tasks-list");function a(){fetch("/get-task-diary-entries").then((function(e){return e.json()})).then((function(t){var n=document.getElementById("entries-container");n.innerHTML="",t.forEach((function(t){if(t.date===e){var a=document.createElement("div");a.classList.add("entry");var r=document.createElement("p");r.innerText="Tasks: ".concat(t.tasks.join(", "));var d=document.createElement("p");d.innerText="Reflections: ".concat(t.reflections),a.appendChild(r),a.appendChild(d),n.appendChild(a)}}))}))}document.getElementById("task-form").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("task-description").value;if(t){var a=document.createElement("li");a.textContent=t,n.appendChild(a),document.getElementById("task-description").value=""}})),document.getElementById("save-button").addEventListener("click",(function(t){t.preventDefault();var r=[];n.querySelectorAll("li").forEach((function(e){r.push(e.textContent)}));var d=document.getElementById("task-reflection").value;fetch("/task-diary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,tasks:r,reflections:d})}).then((function(e){return e.json()})).then((function(e){e.success?(alert("Task diary entry saved!"),a()):alert("Error saving task diary entry.")}))})),a()}));